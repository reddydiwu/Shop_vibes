<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>List Of Products</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
	integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l"
	crossorigin="anonymous" />
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

<!-- jQuery library -->
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/popper.js@2.9.3/dist/umd/popper.min.js"
	integrity="sha384-gfg5O5Hz5V5lN25eO9N2ax/nUwz+VMEpJ/0GZc5xVEWUhtXlL4Q4U6ziiUZ8WLuD"
	crossorigin="anonymous"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
	integrity="sha384-gd3qJdkBwiu2yyt9J7Nq/RlqO3NtOgZwEl0JryEBc+HJG7rfIZmzJzoFe7yiv+yf"
	crossorigin="anonymous"></script>

<style>
.total-box {
	border: 2px solid #ccc;
	padding: 20px;
	margin: 20px;
}

.fixed-top-right {
	position: fixed;
	top: 120px; /* Change this to adjust the distance from the top */
	right: calc(3vw + 3px);
	width: 300px; /* Change this to adjust the width of the box */
	z-index: 9999;
	/* Change this if necessary to avoid overlapping with other elements */
}

.total-box p {
	margin: 10px 0;
}

.total-box span {
	font-weight: bold;
}

.product img {
	max-width: 100%;
	height: auto;
	margin-bottom: 10px;
}

.col-md-4 {
	display: flex;
	flex-direction: column;
	align-items: stretch;
}

.card {
	flex: 1;
}

.total-box {
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
	height: 100%;
	padding: 1rem;
}

.total-box p {
	margin: 0.5rem 0;
}

#total {
	font-weight: bold;
}

.cart-grid {
	display: flex;
	flex-wrap: wrap;
	justify-content: space-between;
}

.th {
	position: sticky;
	top: 0;
	background-color: #fff;
	z-index: 999;
}

.product {
	width: calc(33.33% - 20px);
	margin-bottom: 20px;
	border: 1px solid #ddd;
	padding: 20px;
	text-align: center;
}

.price-container {
	display: flex;
	justify-content: flex-end;
}

table {
	border-collapse: collapse;
}

thead {
	background-color: #e6e6fa; /* lilac color */
}

table {
	border-collapse: collapse;
	width: 100%;
}

thead th {
	position: sticky;
	top: 0;
	background-color: #8e7cc3;
	color: white;
	border-bottom: 1px solid white;
}

th, td {
	padding: 8px;
	text-align: left;
}

tbody tr:nth-child(even) {
	background-color: #f2f2f2;
}

td {
	border: 3px solid black;
}

.price-box {
	background-color: #3af7d7;
	border: 3px solid #e61818;
	padding: 50px;
	box-sizing: border-box;
	border-radius: 30%;
	display: flex;
	justify-content: center;
	align-items: center;
	text-align: center;
}

.container {
	width: 70%;
	float: left;
	border: 5%;
	left: 10%;
}

.col-md-4 {
	width: 25%;
	float: right;
	position: fixed-right;
}

.price-details {
	color: green;
}

.row {
	display: flex;
	justify-content: center;
	align-items: center;
	color: green;
}

button {
	background-color: #f12c09; /* blue color */
	color: #fff; /* text color */
	padding: 10px 20px; /* button padding */
	border: none; /* remove button border */
	border-radius: 5px; /* add border radius */
	cursor: pointer; /* change cursor on hover */
}

table {
	border-collapse: collapse;
	width: 110%;
}

th, td {
	padding: 8px;
	text-align: left;
	border-bottom: 1px solid #ddd;
}

tr:hover {
	background-color: #f5f5f5;
}

table {
	width: 110%; /* extend the width by 10% */
	border-collapse: collapse;
}

.total-box {
	position: fixed;
	top: 50%;
	right: 0;
	background-color: #fff;
	padding: 10px;
	border: 1px solid #ccc;
	transform: translateY(-50%);
}

th {
	text-align: center; /* center-align column headings */
}

td, th {
	padding: 10px; /* add spacing between columns */
}

table {
	border-collapse: collapse;
}

td, th {
	border: none;
	text-align: center;
}

.hidden {
	display: none;
}

table {
	width: 110%;
	border-collapse: collapse;
}

th {
	text-align: center;
}

td {
	text-align: center;
	vertical-align: middle;
	padding: 10px;
}

.cart {
	left: 10%;
}

tr:nth-child(even) {
	background-color: #f2f2f2;
}
</style>
</head>
<body>


	<!-- create navigation bar ( header) -->
	<nav class="navbar navbar-inverse navbar-fixed-top">
		<div class="container">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed"
					data-toggle="collapse" data-target="#navbar" aria-expanded="false"
					aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span><span
						class="icon-bar"></span><span class="icon-bar"></span><span
						class="icon-bar"></span>
				</button>

				<a class="navbar-brand" href="#" th:href="@{/shopvibes/user/}">Home</a>
				<a class="navbar-brand" href="#"
					th:href="@{/shopvibes/user/listofproducts}">Products</a>
			</div>
			<!-- 		<p>Total price: <span id="total"></span></p>   -->

		</div>
	</nav>

	<br>
	<br>
	<br>
	<br>
	<main class="container">
		<div class="row">
			<h1>List Of Cart Items</h1>
		</div>
		<br>
		<article class="cart">
			<table class="table table-striped">


				<thead>
					<tr>
						<th>Image</th>
						<th>Product Name</th>
						<th>Description</th>
						<th>Price</th>
						<th>Category</th>
						<th>QUantity</th>
						<th>Product total</th>
						<th>Delete</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="cart: ${cart}">
						<td><img th:src="${cart.product.imageUrl}"
							alt="Product Image" height=250px width=250px></td>
						<td th:text="${cart.product.productName}"></td>
						<td th:text="${cart.product.description}",></td>
						<td th:text="${cart.product.price}"></td>
						<td th:text="${cart.product.category}"></td>
						<td th:text="${cart.quantity}"></td>
						<!-- 				<td th:text="${cart.quantity}*${cart.product.price}"></td>       -->
						<td class="TotalPrice"
							th:text="${cart.quantity}*${cart.product.price}"></td>
						<td>
							<form th:action="@{/shopvibes/user/{id}(id=${cart.id})}"
								method="post">
								<button type="submit" class="btn btn-danger">Delete</button>
							</form>
						</td>
					</tr>

				</tbody>

			</table>

		</article>
	</main>
	<div class="fixed-top-right">
		<div class="card mb-4">
			<div class="card-header py-3">
				<h3 class="mb-0" align="center">Order Summary</h3>
			</div>
			<div class="card-body">
				<ul class="list-group list-group-flush">
					<li>

						<h4 align="center">
							Total price: <span id="total"></span>
						</h4>
					</li>
				</ul>
				<form action="checkout" >
					<button type="submit" class="btn btn-primary btn-lg btn-block">CheckOut</button>
				</form> 
					<br>
				
					
			<form action="address" >
					<button type="submit" class="btn btn-success btn-lg btn-block">Add
						address</button>
				</form> 
			</div>
		</div>
	</div>


	</div>


	<script>
		let total = 0;
		const productTotals = document.querySelectorAll('td.TotalPrice');
		for (let i = 0; i < productTotals.length; i++) {
			const productTotal = parseFloat(productTotals[i].textContent);
			total += productTotal;
		}
		document.getElementById('total').textContent = total.toFixed(2);

		// Add event listener for "Add address" button
		document.getElementById("add-address").addEventListener(
				"click",
				function() {
					// Show the address form
					document.getElementById("address-form").classList
							.remove("hidden");
				});

		// Add event listener for the address form submit button
		document
				.getElementById("submit-address")
				.addEventListener(
						"click",
						function(event) {
							// Prevent the default form submission behavior
							event.preventDefault();

							// Get the input values from the form
							var address = document
									.getElementById("address-input").value;
							var pincode = document
									.getElementById("pincode-input").value;
							var phone = document.getElementById("phone-input").value;

							// Update the address display in the summary
							document.getElementById("address").textContent = address
									+ " " + pincode;
							document.getElementById("phone").textContent = phone;

							// Clear the input fields
							document.getElementById("address-input").value = "";
							document.getElementById("pincode-input").value = "";
							document.getElementById("phone-input").value = "";

							// Show the success message
							document.getElementById("success-message").classList
									.remove("hidden");
						});
	</script>
</body>
</html>